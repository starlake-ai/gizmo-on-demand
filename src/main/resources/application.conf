gizmosql-proxy {
  # Proxy server configuration
  proxy {
    host = "0.0.0.0"
    host = ${?PROXY_HOST}

    port = 31338
    port = ${?PROXY_PORT}

    # Secret key for JWT token generation (must match backend server's secret key)
    secret-key = "a_very_secret_key"
    secret-key = ${?PROXY_SECRET_KEY}

    # TLS configuration for proxy server (client â†’ proxy)
    tls {
      enabled = true
      enabled = ${?PROXY_TLS_ENABLED}

      # Path to server certificate chain
      cert-chain = "gizmosql-proxy/certs/server-cert.pem"
      cert-chain = ${?PROXY_TLS_CERT_CHAIN}

      # Path to server private key
      private-key = "gizmosql-proxy/certs/server-key.pem"
      private-key = ${?PROXY_TLS_PRIVATE_KEY}
    }
  }
  
  # Backend GizmoSQL server configuration
  backend {
    host = "localhost"
    host = ${?GIZMO_SERVER_HOST}

    port = 31337
    port = ${?GIZMO_SERVER_PORT}

    # TLS configuration for backend connection
    tls {
      enabled = false
      enabled = ${?GIZMOSQL_TLS_ENABLED}

      # Path to trusted certificates for backend
      trusted-certificates = ""
      trusted-certificates = ${?GIZMOSQL_TLS_CERT}
    }

    # Default credentials for anonymous connections (e.g., JDBC clients that don't send auth headers)
    # If set, these credentials will be used when no Authorization header is provided
    default-username = ""
    default-username = ${?GIZMOSQL_DEFAULT_USERNAME}

    default-password = ""
    default-password = ${?GIZMOSQL_DEFAULT_PASSWORD}
  }
  
  # Statement validation configuration
  validation {
    # Enable/disable statement validation
    enabled = false
    enabled = ${?VALIDATION_ENABLED}
    
    # Validation rules
    rules {
      # Allow all statements by default (set to false to deny by default)
      allow-by-default = false
      allow-by-default = ${?VALIDATION_ALLOW_BY_DEFAULT}
      
      # List of users who bypass validation (e.g., admins)
      bypass-users = ["admin"]
      bypass-users = ${?VALIDATION_BYPASS_USERS}
      
      # Database-specific rules file (optional)
      rules-file = ""
      rules-file = ${?VALIDATION_RULES_FILE}
    }
  }
  
  # Logging configuration
  logging {
    level = "INFO"
    level = ${?LOG_LEVEL}

    # Log all SQL statements
    log-statements = true
    log-statements = ${?LOG_STATEMENTS}

    # Log validation decisions
    log-validation = true
    log-validation = ${?LOG_VALIDATION}
  }

}

